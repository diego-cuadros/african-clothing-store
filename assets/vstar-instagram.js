// version:17.0.5
// release time: 2022-12-12 16:52:52
// Date: 2022-12-12 19:31:47
!async function(){let e=sessionStorage.getItem("insTimestamp");e||(e=(new Date).getTime(),sessionStorage.setItem("insTimestamp",e));var t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.vstar.app/static/css/ins.min.css?"+e,document.head.appendChild(t);const s=window.ShopifyAnalytics&&window.ShopifyAnalytics.meta.page.pageType,i={insCurPage:0,insWdoMediaLen:0,insWdoProLen:0,isMobile:!!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),shop_id:shopifyObj.shop_id,insertEl:null,customBlock:null,insSty:"",position:"",isHomePage:"home"===s,isProPage:"product"===s};!function(){switch(i.shop_id){case 65118470360:i.insertEl=u('.shopify-section[id$="__newslettter"]');break;case 58794770525:case 61586768036:i.insertEl=u('.shopify-section[id$="__dynamic_highlights_banner"]');break;case 62312546562:i.insertEl=u('.shopify-section[id$="__newsletter"]');break;case 54867689605:i.insertEl=u(".shopify-section:nth-child(6)");break;case 55199694883:i.insertEl=u(".shopify-section.feature-type1");break;case 64402030811:i.insertEl=u("main"),i.position="afterend";break;case 62245699823:i.insertEl=u("main"),i.position="beforeend"}}(),function(){switch(i.shop_id){case 58794770525:case 61586768036:i.insSty="max-width:1400px;padding:0 20px;margin:60px auto"}}();const n={getInsList(){const{shop_id:e,insPageSize:t,insCurPage:s}=i;return p("reviews/get_instagram_fee_list",{shop_id:e,limit:t,cur_page:s})},getInsSetting:()=>p("reviews/get_instagram_setting",{shop_id:i.shop_id}),getInstallStatus:()=>p("reviews/get_shop_install_status",{shop_id:i.shop_id})};(new Image).src="//cdn.vstar.app/static/images/ins_sprites.png";let o=m("get","instagram_is_install");if(null===o){const e=await n.getInstallStatus();if(null!==e[0]||-1===e[1].code)return;o=e[1].instagram_is_install,m("set","review_is_install",e[1].review_is_install),m("set","instagram_is_install",o)}async function a(){const[e,t]=await n.getInsList();i.lastPageSize||(i.lastPageSize=t.count%i.insPageSize,i.total_page=t.total_page);const s=t.ins_fee_list;if(1===i.insCurPage){if(u("#ins-area .ins-title").href=t.ins_user.ins_user_home_page,i.isInsImgClickWdo){const e=u(".user-name",i.insWdo);e.innerText=t.ins_user.user_name,e.href=t.ins_user.ins_user_home_page}if(i.insPageCount=t.total_page,i.insCurPage!==i.insPageCount){const e=u("#ins-area .ins-button");e&&(e.style.display="block")}const e=[];e.push(s),m("set","insListDate",e)}else{const e=m("get","insListDate");e.push(s),m("set","insListDate",e)}let o="";return s.forEach((e,t)=>{const s=i.insCurPage-1+"-"+t,n="VIDEO"===e.media_type?e.thumbnail_url:e.media_url;let a=e.caption;a=a.length>40?a.slice(0,40)+"...":a;let r="";i.isMobile||(r=`<div class="item-hover"  >\n      <div class="hover-content">\n          <div class="hover-icon">${c(i.insHoverColor)}\n        </div>\n        <div class="hover-text">${a}</div>\n        <div class="hover-date">${e.publish_time}</div> \n      </div>\n    </div>`),o+=`    <div class="ins-wrapper">\n      <div class="ins-item" index="${s}" permalink="${e.permalink}" style="background-image:url(${n})">\n        ${r}\n      </div>\n    </div>`}),o}function r(e){const t=i.insWdo,s=e.child_media_list.length,n=e.product_list.length;i.curMediaLen=s,1===s?(g(".ins-swiper .btn").forEach(e=>e.style.display="none"),i.isInsWdoBtnShow=!1):!i.isInsWdoBtnShow&&g(".ins-swiper .btn").forEach(e=>e.style.display="block")&&(i.isInsWdoBtnShow=!0),t.setAttribute("mediaLen",e.length),i.swiper=u(".ins-swiper",t),e.child_media_list.forEach((e,t)=>{if(t+1>i.insWdoMediaLen)l(e.media_url,e.media_type,t);else{const s=u(`.display-item[index="${t}"]`),i=s.getAttribute("type");e.media_type!==i&&(s.remove(),l(e.media_url,e.media_type,t)),u("img,video",s).src=e.media_url}t===s-1&&s>i.insWdoMediaLen&&(i.insWdoMediaLen=s)}),u('.display-item[index="0"').classList.add("active");const o=g("#ins-detail .product-item");o.forEach((t,s)=>{s+1>e.product_list.length&&(t.style.display="none")}),console.log("================="),console.log("产品个数：",n),console.log("已有节点数",i.insWdoProLen),e.product_list.forEach((e,t)=>{e.product_name.length>25&&(e.product_name=e.product_name.slice(0,25)+"..."),t+1>i.insWdoProLen?function(e){const t=`<div class="product-item"> \n  <div class="product-image" style="background-image:url(${e.product_img_url})"></div>\n    <div class="product-info">\n      <div class="product-name">${e.product_name}</div>\n      <div class="product-price">${e.product_price}</div>\n      <div class="product-shop"><a target="_Blank" href="${e.product_detail_url}" >SHOP NOW</a></div>\n    </div>\n  </div>`;u("#ins-detail .info-product").insertAdjacentHTML("beforeend",t)}(e):(console.log("更新节点索引",t),o[t].style.display="flex",u(".product-name",o[t]).innerHTML=e.product_name,u(".product-shop a",o[t]).href=e.product_detail_url,u(".product-price",o[t]).innerHTML=e.product_price,u(".product-image",o[t]).style.backgroundImage=`url(${e.product_img_url})`),t===n-1&&n>i.insWdoProLen&&(i.insWdoProLen=n)}),console.log("更新后节点数",i.insWdoProLen),u(".info-date",t).innerHTML=e.publish_time,u(".bottom-jump",t).href=e.permalink,u(".info-text",t).innerHTML=e.caption}function l(e,t,s){let n="";n="IMAGE"===t?`<img src="${e}" style="" alt=""> `:`<video width="320" controls  height="240" type="video/mp4" src="${e}"></video>`;const o=`<div class="display-item ${0===s?"active":""}" type="${t}" index="${s}"> ${n}</div>`;i.swiper.insertAdjacentHTML("beforeend",o)}function d(e,t){e=parseInt(e),t=parseInt(t),0===e&&(0===t?(u("#ins-detail .pre-post-btn").style.display="none",i.isPrePostBtnShow=!1):i.isPrePostBtnShow||(u("#ins-detail .pre-post-btn").style.display="block",i.isPrePostBtnShow=!0)),e===i.insCurPage-1&&t===i.insPageSize-1||t===i.lastPageSize-1&&e===i.total_page-1?(u("#ins-detail .next-post-btn").style.display="none",i.isNextPostBtnShow=!1):i.isNextPostBtnShow||(u("#ins-detail .next-post-btn").style.display="block",i.isNextPostBtnShow=!0)}function c(e){return`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M8.99758 4.38213C6.44215 4.38213 4.3798 6.44452 4.3798 9C4.3798 11.5555 6.44215 13.6179 8.99758 13.6179C11.553 13.6179 13.6154 11.5555 13.6154 9C13.6154 6.44452 11.553 4.38213 8.99758 4.38213ZM8.99758 12.0013C7.345 12.0013 5.99636 10.6526 5.99636 9C5.99636 7.34738 7.345 5.99872 8.99758 5.99872C10.6502 5.99872 11.9988 7.34738 11.9988 9C11.9988 10.6526 10.6502 12.0013 8.99758 12.0013ZM13.8045 3.11677C13.2078 3.11677 12.726 3.5986 12.726 4.19525C12.726 4.79191 13.2078 5.27373 13.8045 5.27373C14.4011 5.27373 14.8829 4.79416 14.8829 4.19525C14.8807 3.59635 14.4011 3.11677 13.8045 3.11677V3.11677ZM17.999 9C17.999 7.75716 18.0103 6.52558 17.9405 5.28499C17.8707 3.84402 17.5419 2.56515 16.4883 1.51144C15.4323 0.455477 14.1557 0.129006 12.7148 0.0592092C11.472 -0.0105879 10.2404 0.000669702 8.99983 0.000669702C7.75702 0.000669702 6.52546 -0.0105879 5.28489 0.0592092C3.84395 0.129006 2.5651 0.457728 1.51141 1.51144C0.455469 2.5674 0.129004 3.84402 0.0592081 5.28499C-0.0105877 6.52783 0.000669689 7.75941 0.000669689 9C0.000669689 10.2406 -0.0105877 11.4744 0.0592081 12.715C0.129004 14.156 0.45772 15.4348 1.51141 16.4886C2.56736 17.5445 3.84395 17.871 5.28489 17.9408C6.52771 18.0106 7.75927 17.9993 8.99983 17.9993C10.2426 17.9993 11.4742 18.0106 12.7148 17.9408C14.1557 17.871 15.4346 17.5423 16.4883 16.4886C17.5442 15.4326 17.8707 14.156 17.9405 12.715C18.0125 11.4744 17.999 10.2428 17.999 9V9ZM16.0177 14.3091C15.8533 14.7189 15.6552 15.0251 15.3377 15.3403C15.0203 15.6577 14.7163 15.8559 14.3066 16.0202C13.1223 16.4908 10.3102 16.385 8.99758 16.385C7.68497 16.385 4.87062 16.4908 3.68634 16.0225C3.27657 15.8581 2.97037 15.66 2.65516 15.3425C2.33771 15.0251 2.13958 14.7211 1.97522 14.3113C1.50691 13.1248 1.61273 10.3126 1.61273 9C1.61273 7.68736 1.50691 4.87296 1.97522 3.68866C2.13958 3.27888 2.33771 2.97268 2.65516 2.65746C2.97262 2.34225 3.27657 2.14187 3.68634 1.97751C4.87062 1.50919 7.68497 1.61501 8.99758 1.61501C10.3102 1.61501 13.1245 1.50919 14.3088 1.97751C14.7186 2.14187 15.0248 2.34 15.34 2.65746C15.6575 2.97493 15.8556 3.27888 16.0199 3.68866C16.4883 4.87296 16.3824 7.68736 16.3824 9C16.3824 10.3126 16.4883 13.1248 16.0177 14.3091Z" fill="${e}"/>\n    </svg>`}function p(e,t,s,i=!1,n=!1){return new Promise((n,o)=>{!function(e,t={},s="GET",i,n){let o=new XMLHttpRequest,a="https://api.trustoo.io/api/v1/"+e,r="";"object"==typeof t&&(r=Object.keys(t).reduce((e,s)=>e+"&"+s+"="+t[s],"")),"POST"==s?(o.open(s,a,!0),r=r?r.slice(1):t,o.send(r)):"GET"==s&&(r&&(r=r.replace("&","?"),a+=r),o.open(s,a,!0),o.send()),o.onreadystatechange=()=>{if(4==o.readyState){let e=o.responseText;200==o.status||203==o.status?i&&i(e):n&&n({responseText:e,statusText:o.statusText})}}}(e,t,s,n,i)}).then(e=>{if(e=n?t.get("key"):JSON.parse(e),!i&&!n){const t=e.code;(e=e.data).code=t}return[null,e]}).catch(e=>[{error:e,params:t}])}function u(e,t){let s;return s=t?t.querySelector(e):document.querySelector(e),s}function g(e,t){let s;return s=t?t.querySelectorAll(e):document.querySelectorAll(e),s}function m(e,t,s){return"set"===e?sessionStorage.setItem(t,JSON.stringify(s)):JSON.parse(sessionStorage.getItem(t))}1===o&&async function(){const{isHomePage:e,isProPage:t}=i;let s,o;"undefined"!=typeof vstar_instagram_settings?s=vstar_instagram_settings:[o,s]=await n.getInsSetting();if(!s)return;const l=u(".custom-vstar-ig-widget");if(l&&(i.insertEl=l),!(e&&1===s.homepage_display||t&&1===s.productpage_display||l))return;i.openIns=!0;const p=i.isMobile;let _=p?s.mobile_columns_count:s.desktop_columns_count,v=p?s.mobile_rows_count:s.desktop_rows_count;i.insCurPage++,i.insPageSize=_*v,i.is_del_powered=s.is_del_powered;const h=1/_*100+"%",y=document.createElement("style");document.head.appendChild(y),i.is=y,1===s.img_clicked_event_type&&(i.isInsImgClickWdo=!0,function(){const e=i.isMobile;let t="",s="",n="",o="",a="",l="";1!==i.is_del_powered&&(a=`<div class="vstar-power" style="display:${1===i.is_del_powered?"none":"flex"}">\n    <a target="_blank" href="https://www.trustoo.io/"\n    >Powered by Trustoo.io</a></div>`);e?(t=a,n='    <div class="ins-swiper">\n    <div class="topre btn"></div>\n    <div class="tonext btn"></div>\n     </div>'):(s=a,o='    <div class="ins-swiper">\n    <div class="topre btn"></div>\n    <div class="tonext btn"></div>\n     </div>',l='<button class="post-toggle-btn pre-post-btn"></button>\n     <button class="post-toggle-btn next-post-btn"></button>');const p=`<div class="mask window-ins-mask" style="display:none" > <div id="ins-detail" class="vstar-widget">\n     ${o}\n     <div class="ins-info">\n      <div class="info-user">\n        <div class="user-avatar" style="background-image:url(https://cdn.vstar.app/static/images/ins_wdo-avatar.svg)">\n        ${c("#666666")}\n        </div>\n        <div class="user-info">        <a class="user-name" href="" target="_blank"></a>\n        <div class="user-email"></div></div>\n        <div class="window-close"></div>\n      </div>\n      ${n}\n      <div class="info-text"></div>\n      <div class="info-product"></div>\n      <div class="info-bottom"><span class="info-date"></span><a href="" target="_blank" class="bottom-jump">&nbsp; View on Instagram</a></div>\n      ${t}\n    </div>\n    ${s}\n    ${l}\n   </div>\n   </div>\n  </div>`;document.body.insertAdjacentHTML("beforeend",p);const _=i.insWdo=u("#ins-detail");u("#ins-detail .window-close").onclick=function(){u(".window-ins-mask").style.display="none",document.body.style.overflow="scroll",document.body.style.marginRight="0",g("#ins-detail .product-item").forEach(e=>e.style.display="none"),u(".display-item.active").classList.remove("active")},u(".tonext",_).onclick=function(){const e=i.curMediaLen;let t=u(".active"),s=parseInt(t.getAttribute("index"));t.classList.remove("active"),s++,s==e&&(s=0),u(`.display-item[index="${s}"`).classList.add("active")},u(".topre",_).onclick=function(){const e=i.curMediaLen;let t=u(".active"),s=parseInt(t.getAttribute("index"));t.classList.remove("active"),s--,s<0&&(s=e-1),u(`.display-item[index="${s}"`).classList.add("active")},e||(u(".pre-post-btn",_).onclick=function(){let e=parseInt(i.wdoTarInx),t=parseInt(i.wdoTarPage);0===e?(t--,i.wdoTarPage=t,e=i.insPageSize-1):e--,i.wdoTarInx=e;const s=m("get","insListDate")[t][e];d(t,e),u(".display-item.active").classList.remove("active"),r(s)},u(".next-post-btn",_).onclick=function(){let e=parseInt(i.wdoTarInx),t=parseInt(i.wdoTarPage);e===i.insPageSize-1?(t++,i.wdoTarPage=t,e=0):e++,i.wdoTarInx=e;const s=m("get","insListDate")[t][e];d(t,e),u(".display-item.active").classList.remove("active"),r(s)})}());let b="";1===s.enabled_more_button&&(b=`<button class="ins-button" style="display:none">${s.more_button_text}</button>`);const f=`<div id="ins-area" style="display:none"  class="vstar-widget">\n  <a class="ins-title" target="_blank" href="">${s.title_text}</a>  \n  <div id="ins-list">\n  </div>\n  ${b}\n</div>`;i.insertEl||(i.insertEl=u("footer"));let w="beforebegin";l?w="afterbegin":i.position&&(w=i.position);i.insertEl.insertAdjacentHTML(w,f);const C=u("#ins-list");i.insHoverColor=s.hover_text_color;const x=await a();x?C.insertAdjacentHTML("beforeend",x):i.isNoPost=!0;let P=null;i.isNoPost||p||(C.onmouseover=function(e){const t=e.target;"ins-item"===t.className&&(P&&(P.style.display="none"),P=u(".item-hover",t.parentNode),P.style.display="block")},C.onmouseout=function(e){e.target;this.contains(e.toElement)&&e.toElement!==this||!P||(P.style.display="none",P=null)});C.onclick=e=>{if(!p&&P.contains(e.target)||"ins-item"===e.target.className){const t=P?P.parentNode:e.target;if(1===s.img_clicked_event_type){const e=t.getAttribute("index").split("-");i.insWdo.parentNode.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight="17px";const s=m("get","insListDate")[e[0]][e[1]];i.wdoTarPage=e[0],i.wdoTarInx=e[1],!p&&d(e[0],e[1]),r(s)}else 2===s.img_clicked_event_type&&window.open(t.getAttribute("permalink"))}},1===s.enabled_more_button&&(u("#ins-area .ins-button").onclick=async function(){this.style.display="none",i.insCurPage++,C.insertAdjacentHTML("beforeend",await a()),i.insCurPage!==i.insPageCount&&(this.style.display="block")});y.textContent+=`\n  #ins-area .ins-title{color:${s.title_text_color};}\n    #ins-area .ins-button{background-color:${s.more_button_background_color};color:${s.more_button_text_color};display:${s.enabled_more_button?"inline-block":"none"}}\n    #ins-list .item-hover{background-color:${function(e,t){2==t&&(t=1);return"rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")"}(s.hover_background_color,.6)};border-radius:${s.border_radius}px;}\n    #ins-list .item-hover .hover-text,#ins-list .item-hover .hover-date{color:${s.hover_text_color};}\n    #ins-list .item-hover .hover-logo{display:${s.enabled_logo_instagram?"inline-block":"none"};}\n    #ins-list .ins-wrapper{flex-basis:${h};padding:${s.item_padding}px;border-radius:${s.border_radius}px;}\n    #ins-list .ins-item{border-radius:${s.border_radius}px;}\n    `,u("#ins-area").style.cssText=i.insSty}()}();